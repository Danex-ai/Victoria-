<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Apology</title>
<style>
  * {margin:0;padding:0;box-sizing:border-box;}

  body {
    position: relative;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    font-family: "Arial", sans-serif;
  }

  /* Dimmed background image */
  body::before {
    content:"";
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    background: url("db.jpg") no-repeat center center/cover;
    filter: brightness(0.3);
    z-index:0;
  }

  #canvas {
    position: relative;
    width: 100vw;
    height: 100vh;
    z-index:1;
  }

  .rose {
    position: absolute;
    width: 40px;
    height: 40px;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 10;
    filter: drop-shadow(0 0 8px rgba(255, 23, 68, 0.8));
  }

  .rose svg { width: 100%; height: 100%; }

  .petal-particle {
    position: absolute;
    width: 12px; height: 12px;
    background: radial-gradient(ellipse at center, #ff1744 0%, #f50057 100%);
    border-radius: 50% 0 50% 0;
    pointer-events: none;
    z-index: 5;
    animation: petalFall linear forwards;
  }

  @keyframes petalFall {
    0% { opacity: 1; transform: translate(0,0) rotate(0deg) scale(1);}
    100% { opacity: 0; transform: translate(var(--drift-x),400px) rotate(720deg) scale(0.3);}
  }

  .rose-trail {
    position: absolute; width: 30px; height: 30px;
    transform: translate(-50%, -50%);
    opacity: 0.6;
    pointer-events: none;
    z-index: 8;
    animation: fadeTrail 1s forwards;
  }

  @keyframes fadeTrail {
    0% { opacity:0.6; transform: translate(-50%, -50%) scale(1);}
    100% { opacity:0; transform: translate(-50%, -50%) scale(0.5);}
  }

  .glow-line {
    position: absolute; width:6px; height:6px; border-radius:50%;
    pointer-events:none; z-index:3; box-shadow:0 0 15px currentColor;
  }

  .love-text-container {
    position: absolute;
    bottom: 25%; /* leave space for apology */
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    opacity: 0;
    transition: opacity 2s;
    z-index: 20;
    max-width: 90vw;
  }

  .love-text-container.show { opacity: 1; }

  .letter-rose {
    width: 40px; height: 40px;
    min-width: 30px; min-height: 30px;
    filter: drop-shadow(0 0 10px rgba(255,23,68,0.8));
    animation: letterPulse 2s infinite;
    position: relative;
  }

  @keyframes letterPulse {
    0%,100% { transform: scale(1);}
    50% { transform: scale(1.1);}
  }

  .sparkle {
    position:absolute; width:4px; height:4px; background:white; border-radius:50%;
    pointer-events:none;
    animation: sparkleAnim 1s forwards;
  }

  @keyframes sparkleAnim {
    0% { opacity:1; transform: scale(0);}
    50% { opacity:1; transform: scale(1.5);}
    100% { opacity:0; transform: scale(0);}
  }

  /* Apology paragraph */
  .apology-text {
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    color: #ffb6c1;
    font-size: 20px; /* larger font */
    font-weight: 500;
    line-height: 1.6em;
    text-align: center;
    text-shadow: 0 0 8px rgba(255,182,193,0.8);
    max-width: 90vw;
    z-index: 15;
    white-space: pre-wrap;
  }

  @media (max-width: 600px) {
    .letter-rose { width:28px; height:28px;}
    .apology-text { font-size:16px; }
    .love-text-container { gap:5px; max-width:95vw; }
  }
</style>
</head>
<body>
<div id="canvas">
  <div class="love-text-container" id="loveText"></div>
</div>

<script>
const canvas = document.getElementById("canvas");
const loveTextContainer = document.getElementById("loveText");
const centerX = window.innerWidth / 2;
const centerY = window.innerHeight / 2;

const apologyText =
  "Victoria, I want to start by saying I am truly sorry. " +
  "I’ve taken time to reflect on what happened, and I understand why you felt hurt and upset. " +
  "I should have been more thoughtful, more open, and more respectful of your feelings from the very beginning. " +
  "Even if my intentions were innocent, I now see that my actions still affected you, and that’s something I take full responsibility for. " +
  "I never meant to make you feel ignored, disrespected, or replaced. " +
  "You matter to me more than I’ve probably shown, and it genuinely hurts me knowing that I caused you pain. " +
  "I’m not asking you to forget how you feel or to rush anything. " +
  "All I’m asking for is the chance to talk, to listen to you properly, and to do better moving forward. " +
  "Whenever you’re ready, I’ll be here. " +
  "I’m sorry, Victoria — sincerely and honestly. ❤️";

function createRoseSVG(color="#ff1744", color2="#f50057"){
  return `
  <svg viewBox="0 0 100 100">
    <ellipse cx="50" cy="40" rx="18" ry="25" fill="${color}" transform="rotate(0 50 40)"/>
    <ellipse cx="35" cy="47" rx="18" ry="25" fill="${color}" transform="rotate(-45 35 47)"/>
    <ellipse cx="65" cy="47" rx="18" ry="25" fill="${color}" transform="rotate(45 65 47)"/>
    <ellipse cx="30" cy="60" rx="18" ry="25" fill="${color}" transform="rotate(-80 30 60)"/>
    <ellipse cx="70" cy="60" rx="18" ry="25" fill="${color}" transform="rotate(80 70 60)"/>
    <ellipse cx="50" cy="50" rx="12" ry="18" fill="${color2}" transform="rotate(20 50 50)"/>
    <ellipse cx="42" cy="55" rx="12" ry="18" fill="${color2}" transform="rotate(-30 42 55)"/>
    <ellipse cx="58" cy="55" rx="12" ry="18" fill="${color2}" transform="rotate(30 58 55)"/>
    <circle cx="50" cy="55" r="8" fill="#c62828"/>
  </svg>`;
}

function createPetal(x,y){const p=document.createElement("div");p.className="petal-particle";p.style.left=x+"px";p.style.top=y+"px";p.style.setProperty("--drift-x",(Math.random()-0.5)*100+"px");p.style.animationDuration=1.5+Math.random()*1+"s";canvas.appendChild(p);setTimeout(()=>p.remove(),3000);}
function createSparkle(x,y){const s=document.createElement("div");s.className="sparkle";s.style.left=x+"px";s.style.top=y+"px";canvas.appendChild(s);setTimeout(()=>s.remove(),1000);}
function createGlowDot(x,y,color){const d=document.createElement("div");d.className="glow-line";d.style.left=x+"px";d.style.top=y+"px";d.style.background=color;d.style.color=color;canvas.appendChild(d);}
function generateHeartPoints(size,segments=300){const points=[];for(let i=0;i<=segments;i++){const t=(i/segments)*Math.PI*2;const x=size*16*Math.pow(Math.sin(t),3);const y=-size*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));points.push({x:centerX+x,y:centerY+y});}return points;}
function animateHeartWithRose(size,color1,color2,delay,speed=15){setTimeout(()=>{const points=generateHeartPoints(size);let currentIndex=0;const rose=document.createElement("div");rose.className="rose";rose.innerHTML=createRoseSVG(color1,color2);canvas.appendChild(rose);function drawStep(){if(currentIndex>=points.length){rose.remove();return;}const p=points[currentIndex];rose.style.left=p.x+"px";rose.style.top=p.y+"px";createGlowDot(p.x,p.y,color1);if(currentIndex%8===0)createPetal(p.x,p.y);if(currentIndex%15===0)createSparkle(p.x+(Math.random()-0.5)*20,p.y+(Math.random()-0.5)*20);if(currentIndex%3===0){const t=document.createElement("div");t.className="rose-trail";t.innerHTML=createRoseSVG(color1,color2);t.style.left=p.x+"px";t.style.top=p.y+"px";canvas.appendChild(t);setTimeout(()=>t.remove(),1000);}currentIndex++;setTimeout(drawStep,speed);}drawStep();},delay);}
function createLoveTextWithRoses(){setTimeout(()=>{const letters=["I","AM","S","O","R","R","Y","","V","I","C","T","O","R","I","A","❤"];const colors=[["#ff1744","#f50057"],["#f50057","#ff4081"],["#ff4081","#ff80ab"],["#ff80ab","#ff5252"],["#ff5252","#ff1744"],["#ff1744","#f50057"],["#f50057","#ff4081"],["#ff4081","#ff80ab"],["#ff80ab","#ff5252"],["#ff5252","#ff1744"]];letters.forEach((l,i)=>{setTimeout(()=>{if(l==="❤"){const h=document.createElement("div");h.className="letter-rose";h.style.animationDelay=i*0.1+"s";h.innerHTML=`<svg viewBox="0 0 100 100"><path d="M50,85 C50,85 15,60 15,40 C15,25 25,15 35,15 C42,15 48,20 50,25 C52,20 58,15 65,15 C75,15 85,25 85,40 C85,60 50,85 50,85 Z" fill="${colors[i][0]}"/></svg>`;loveTextContainer.appendChild(h);}else if(l!==""){const d=document.createElement("div");d.className="letter-rose";d.style.animationDelay=i*0.1+"s";d.innerHTML=createRoseSVG(colors[i][0],colors[i][1]);d.style.position="relative";const t=document.createElement("div");t.textContent=l;t.style.position="absolute";t.style.top="50%";t.style.left="50%";t.style.transform="translate(-50%,-50%)";t.style.fontSize="20px";t.style.fontWeight="bold";t.style.color="white";t.style.textShadow="0 0 5px rgba(0,0,0,0.8)";d.appendChild(t);loveTextContainer.appendChild(d);}else{const s=document.createElement("div");s.style.width="20px";loveTextContainer.appendChild(s);}},i*150);});setTimeout(()=>{loveTextContainer.classList.add("show");},letters.length*150);},18000);}

function typeApology(text,container,delay=30){let index=0;const p=document.createElement("p");p.className="apology-text";container.appendChild(p);function type(){if(index<text.length){p.textContent+=text[index];index++;setTimeout(type,delay);}}type();}

const heartConfigs=[
  {size:3,color1:"#ff5252",color2:"#ff1744",delay:0,speed:12},
  {size:5,color1:"#ff4081",color2:"#f50057",delay:4000,speed:11},
  {size:7,color1:"#ff80ab",color2:"#ff4081",delay:8000,speed:10},
  {size:9,color1:"#f50057",color2:"#ff1744",delay:12000,speed:9},
  {size:11,color1:"#ff1744",color2:"#c62828",delay:16000,speed:8}
];

heartConfigs.forEach(c=>animateHeartWithRose(c.size,c.color1,c.color2,c.delay,c.speed));
createLoveTextWithRoses();
setTimeout(()=>{typeApology(apologyText,canvas,30);},20000);
</script>
</body>
</html>
